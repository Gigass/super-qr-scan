{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/es.iterator.map.js\";\n/**\n * 二维码检测工具模块\n * 使用 ZXing-wasm 库检测图像中的二维码位置\n */\nimport { readBarcodesFromImageData, setZXingModuleOverrides } from '@aspect/zxing-wasm/reader';\n\n// 配置 ZXing WASM 模块路径\nsetZXingModuleOverrides({\n  locateFile: (path, prefix) => {\n    if (path.endsWith('.wasm')) {\n      return `https://unpkg.com/@aspect/zxing-wasm@0.2.0/dist/reader/${path}`;\n    }\n    return prefix + path;\n  }\n});\n\n/**\n * 检测图像中的二维码位置\n * @param {ImageData} imageData - Canvas 的 ImageData 对象\n * @returns {Promise<Object|null>} 检测结果，包含位置信息\n */\nexport async function detectQRCode(imageData) {\n  try {\n    // 使用 ZXing 检测二维码\n    const results = await readBarcodesFromImageData(imageData, {\n      tryHarder: true,\n      // 更努力地检测（包括模糊/倾斜的码）\n      formats: ['QRCode'],\n      // 只检测二维码\n      maxNumberOfSymbols: 10 // 最多检测10个二维码\n    });\n    if (!results || results.length === 0) {\n      return null;\n    }\n\n    // 处理所有检测到的二维码\n    const detections = results.map(result => {\n      const {\n        position\n      } = result;\n\n      // ZXing 返回的是 position 对象，包含四个角点\n      // position.topLeft, position.topRight, position.bottomRight, position.bottomLeft\n      const topLeft = {\n        x: position.topLeft.x,\n        y: position.topLeft.y\n      };\n      const topRight = {\n        x: position.topRight.x,\n        y: position.topRight.y\n      };\n      const bottomRight = {\n        x: position.bottomRight.x,\n        y: position.bottomRight.y\n      };\n      const bottomLeft = {\n        x: position.bottomLeft.x,\n        y: position.bottomLeft.y\n      };\n      return {\n        topLeft,\n        topRight,\n        bottomRight,\n        bottomLeft,\n        boundingBox: calculateBoundingBox({\n          topLeft,\n          topRight,\n          bottomRight,\n          bottomLeft\n        }),\n        center: calculateCenter({\n          topLeft,\n          topRight,\n          bottomRight,\n          bottomLeft\n        })\n      };\n    });\n\n    // 返回第一个检测结果（保持向后兼容）\n    // 同时返回所有结果供需要时使用\n    return {\n      ...detections[0],\n      allDetections: detections\n    };\n  } catch (error) {\n    console.error('ZXing 检测错误:', error);\n    return null;\n  }\n}\n\n/**\n * 计算边界框\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 边界框 { x, y, width, height }\n */\nfunction calculateBoundingBox(corners) {\n  const {\n    topLeft,\n    topRight,\n    bottomRight,\n    bottomLeft\n  } = corners;\n  const points = [topLeft, topRight, bottomRight, bottomLeft];\n  const xs = points.map(p => p.x);\n  const ys = points.map(p => p.y);\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = Math.min(...ys);\n  const maxY = Math.max(...ys);\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\n\n/**\n * 计算二维码中心点\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 中心点坐标 { x, y }\n */\nfunction calculateCenter(corners) {\n  const {\n    topLeft,\n    bottomRight\n  } = corners;\n  return {\n    x: (topLeft.x + bottomRight.x) / 2,\n    y: (topLeft.y + bottomRight.y) / 2\n  };\n}\n\n/**\n * 在 Canvas 上绘制检测结果\n * @param {CanvasRenderingContext2D} ctx - Canvas 2D 上下文\n * @param {Object} detection - 检测结果\n * @param {Object} options - 绘制选项\n */\nexport function drawDetectionResult(ctx, detection, options = {}) {\n  const {\n    strokeColor = '#00f5a0',\n    fillColor = 'rgba(0, 245, 160, 0.15)',\n    lineWidth = 3,\n    cornerRadius = 8,\n    showCenter = true,\n    showCorners = true\n  } = options;\n\n  // 绘制所有检测到的二维码\n  const detections = detection.allDetections || [detection];\n  detections.forEach((det, index) => {\n    const {\n      topLeft,\n      topRight,\n      bottomRight,\n      bottomLeft,\n      center\n    } = det;\n\n    // 不同二维码用不同颜色\n    const colors = ['#00f5a0', '#ff6b6b', '#4ecdc4', '#ffe66d', '#a855f7'];\n    const color = colors[index % colors.length];\n    ctx.save();\n\n    // 绘制填充区域\n    ctx.fillStyle = fillColor;\n    ctx.beginPath();\n    ctx.moveTo(topLeft.x, topLeft.y);\n    ctx.lineTo(topRight.x, topRight.y);\n    ctx.lineTo(bottomRight.x, bottomRight.y);\n    ctx.lineTo(bottomLeft.x, bottomLeft.y);\n    ctx.closePath();\n    ctx.fill();\n\n    // 绘制边框\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    // 绘制四边形边框\n    ctx.beginPath();\n    ctx.moveTo(topLeft.x, topLeft.y);\n    ctx.lineTo(topRight.x, topRight.y);\n    ctx.lineTo(bottomRight.x, bottomRight.y);\n    ctx.lineTo(bottomLeft.x, bottomLeft.y);\n    ctx.closePath();\n    ctx.stroke();\n\n    // 绘制角点标记\n    if (showCorners) {\n      const corners = [topLeft, topRight, bottomRight, bottomLeft];\n      ctx.fillStyle = color;\n      corners.forEach(corner => {\n        ctx.beginPath();\n        ctx.arc(corner.x, corner.y, cornerRadius, 0, Math.PI * 2);\n        ctx.fill();\n      });\n    }\n\n    // 绘制中心点\n    if (showCenter) {\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.arc(center.x, center.y, 6, 0, Math.PI * 2);\n      ctx.fill();\n\n      // 绘制十字线\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 2;\n      const crossSize = 15;\n      ctx.beginPath();\n      ctx.moveTo(center.x - crossSize, center.y);\n      ctx.lineTo(center.x + crossSize, center.y);\n      ctx.moveTo(center.x, center.y - crossSize);\n      ctx.lineTo(center.x, center.y + crossSize);\n      ctx.stroke();\n    }\n    ctx.restore();\n  });\n}\n\n/**\n * 从视频帧获取 ImageData\n * @param {HTMLVideoElement} video - 视频元素\n * @param {HTMLCanvasElement} canvas - Canvas 元素\n * @returns {ImageData|null} ImageData 对象\n */\nexport function getImageDataFromVideo(video, canvas) {\n  if (!video || video.readyState !== video.HAVE_ENOUGH_DATA) {\n    return null;\n  }\n  const ctx = canvas.getContext('2d');\n  canvas.width = video.videoWidth;\n  canvas.height = video.videoHeight;\n  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n  return ctx.getImageData(0, 0, canvas.width, canvas.height);\n}\n\n/**\n * 从图片文件获取 ImageData\n * @param {File} file - 图片文件\n * @returns {Promise<{imageData: ImageData, width: number, height: number}>}\n */\nexport function getImageDataFromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = e => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        const imageData = ctx.getImageData(0, 0, img.width, img.height);\n        resolve({\n          imageData,\n          width: img.width,\n          height: img.height,\n          imageSrc: e.target.result\n        });\n      };\n      img.onerror = () => reject(new Error('图片加载失败'));\n      img.src = e.target.result;\n    };\n    reader.onerror = () => reject(new Error('文件读取失败'));\n    reader.readAsDataURL(file);\n  });\n}","map":{"version":3,"names":["readBarcodesFromImageData","setZXingModuleOverrides","locateFile","path","prefix","endsWith","detectQRCode","imageData","results","tryHarder","formats","maxNumberOfSymbols","length","detections","map","result","position","topLeft","x","y","topRight","bottomRight","bottomLeft","boundingBox","calculateBoundingBox","center","calculateCenter","allDetections","error","console","corners","points","xs","p","ys","minX","Math","min","maxX","max","minY","maxY","width","height","drawDetectionResult","ctx","detection","options","strokeColor","fillColor","lineWidth","cornerRadius","showCenter","showCorners","forEach","det","index","colors","color","save","fillStyle","beginPath","moveTo","lineTo","closePath","fill","strokeStyle","lineCap","lineJoin","stroke","corner","arc","PI","crossSize","restore","getImageDataFromVideo","video","canvas","readyState","HAVE_ENOUGH_DATA","getContext","videoWidth","videoHeight","drawImage","getImageData","getImageDataFromFile","file","Promise","resolve","reject","reader","FileReader","onload","e","img","Image","document","createElement","imageSrc","target","onerror","Error","src","readAsDataURL"],"sources":["/Users/gigass/DEVELOP/GitHub/qrcode/src/utils/qrDetector.js"],"sourcesContent":["/**\n * 二维码检测工具模块\n * 使用 ZXing-wasm 库检测图像中的二维码位置\n */\nimport { readBarcodesFromImageData, setZXingModuleOverrides } from '@aspect/zxing-wasm/reader'\n\n// 配置 ZXing WASM 模块路径\nsetZXingModuleOverrides({\n  locateFile: (path, prefix) => {\n    if (path.endsWith('.wasm')) {\n      return `https://unpkg.com/@aspect/zxing-wasm@0.2.0/dist/reader/${path}`\n    }\n    return prefix + path\n  }\n})\n\n/**\n * 检测图像中的二维码位置\n * @param {ImageData} imageData - Canvas 的 ImageData 对象\n * @returns {Promise<Object|null>} 检测结果，包含位置信息\n */\nexport async function detectQRCode(imageData) {\n  try {\n    // 使用 ZXing 检测二维码\n    const results = await readBarcodesFromImageData(imageData, {\n      tryHarder: true,        // 更努力地检测（包括模糊/倾斜的码）\n      formats: ['QRCode'],    // 只检测二维码\n      maxNumberOfSymbols: 10  // 最多检测10个二维码\n    })\n    \n    if (!results || results.length === 0) {\n      return null\n    }\n    \n    // 处理所有检测到的二维码\n    const detections = results.map(result => {\n      const { position } = result\n      \n      // ZXing 返回的是 position 对象，包含四个角点\n      // position.topLeft, position.topRight, position.bottomRight, position.bottomLeft\n      const topLeft = { x: position.topLeft.x, y: position.topLeft.y }\n      const topRight = { x: position.topRight.x, y: position.topRight.y }\n      const bottomRight = { x: position.bottomRight.x, y: position.bottomRight.y }\n      const bottomLeft = { x: position.bottomLeft.x, y: position.bottomLeft.y }\n      \n      return {\n        topLeft,\n        topRight,\n        bottomRight,\n        bottomLeft,\n        boundingBox: calculateBoundingBox({ topLeft, topRight, bottomRight, bottomLeft }),\n        center: calculateCenter({ topLeft, topRight, bottomRight, bottomLeft })\n      }\n    })\n    \n    // 返回第一个检测结果（保持向后兼容）\n    // 同时返回所有结果供需要时使用\n    return {\n      ...detections[0],\n      allDetections: detections\n    }\n  } catch (error) {\n    console.error('ZXing 检测错误:', error)\n    return null\n  }\n}\n\n/**\n * 计算边界框\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 边界框 { x, y, width, height }\n */\nfunction calculateBoundingBox(corners) {\n  const { topLeft, topRight, bottomRight, bottomLeft } = corners\n  const points = [topLeft, topRight, bottomRight, bottomLeft]\n  \n  const xs = points.map(p => p.x)\n  const ys = points.map(p => p.y)\n  \n  const minX = Math.min(...xs)\n  const maxX = Math.max(...xs)\n  const minY = Math.min(...ys)\n  const maxY = Math.max(...ys)\n  \n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  }\n}\n\n/**\n * 计算二维码中心点\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 中心点坐标 { x, y }\n */\nfunction calculateCenter(corners) {\n  const { topLeft, bottomRight } = corners\n  \n  return {\n    x: (topLeft.x + bottomRight.x) / 2,\n    y: (topLeft.y + bottomRight.y) / 2\n  }\n}\n\n/**\n * 在 Canvas 上绘制检测结果\n * @param {CanvasRenderingContext2D} ctx - Canvas 2D 上下文\n * @param {Object} detection - 检测结果\n * @param {Object} options - 绘制选项\n */\nexport function drawDetectionResult(ctx, detection, options = {}) {\n  const {\n    strokeColor = '#00f5a0',\n    fillColor = 'rgba(0, 245, 160, 0.15)',\n    lineWidth = 3,\n    cornerRadius = 8,\n    showCenter = true,\n    showCorners = true\n  } = options\n  \n  // 绘制所有检测到的二维码\n  const detections = detection.allDetections || [detection]\n  \n  detections.forEach((det, index) => {\n    const { topLeft, topRight, bottomRight, bottomLeft, center } = det\n    \n    // 不同二维码用不同颜色\n    const colors = ['#00f5a0', '#ff6b6b', '#4ecdc4', '#ffe66d', '#a855f7']\n    const color = colors[index % colors.length]\n    \n    ctx.save()\n    \n    // 绘制填充区域\n    ctx.fillStyle = fillColor\n    ctx.beginPath()\n    ctx.moveTo(topLeft.x, topLeft.y)\n    ctx.lineTo(topRight.x, topRight.y)\n    ctx.lineTo(bottomRight.x, bottomRight.y)\n    ctx.lineTo(bottomLeft.x, bottomLeft.y)\n    ctx.closePath()\n    ctx.fill()\n    \n    // 绘制边框\n    ctx.strokeStyle = color\n    ctx.lineWidth = lineWidth\n    ctx.lineCap = 'round'\n    ctx.lineJoin = 'round'\n    \n    // 绘制四边形边框\n    ctx.beginPath()\n    ctx.moveTo(topLeft.x, topLeft.y)\n    ctx.lineTo(topRight.x, topRight.y)\n    ctx.lineTo(bottomRight.x, bottomRight.y)\n    ctx.lineTo(bottomLeft.x, bottomLeft.y)\n    ctx.closePath()\n    ctx.stroke()\n    \n    // 绘制角点标记\n    if (showCorners) {\n      const corners = [topLeft, topRight, bottomRight, bottomLeft]\n      ctx.fillStyle = color\n      \n      corners.forEach(corner => {\n        ctx.beginPath()\n        ctx.arc(corner.x, corner.y, cornerRadius, 0, Math.PI * 2)\n        ctx.fill()\n      })\n    }\n    \n    // 绘制中心点\n    if (showCenter) {\n      ctx.fillStyle = color\n      ctx.beginPath()\n      ctx.arc(center.x, center.y, 6, 0, Math.PI * 2)\n      ctx.fill()\n      \n      // 绘制十字线\n      ctx.strokeStyle = color\n      ctx.lineWidth = 2\n      const crossSize = 15\n      \n      ctx.beginPath()\n      ctx.moveTo(center.x - crossSize, center.y)\n      ctx.lineTo(center.x + crossSize, center.y)\n      ctx.moveTo(center.x, center.y - crossSize)\n      ctx.lineTo(center.x, center.y + crossSize)\n      ctx.stroke()\n    }\n    \n    ctx.restore()\n  })\n}\n\n/**\n * 从视频帧获取 ImageData\n * @param {HTMLVideoElement} video - 视频元素\n * @param {HTMLCanvasElement} canvas - Canvas 元素\n * @returns {ImageData|null} ImageData 对象\n */\nexport function getImageDataFromVideo(video, canvas) {\n  if (!video || video.readyState !== video.HAVE_ENOUGH_DATA) {\n    return null\n  }\n  \n  const ctx = canvas.getContext('2d')\n  canvas.width = video.videoWidth\n  canvas.height = video.videoHeight\n  \n  ctx.drawImage(video, 0, 0, canvas.width, canvas.height)\n  \n  return ctx.getImageData(0, 0, canvas.width, canvas.height)\n}\n\n/**\n * 从图片文件获取 ImageData\n * @param {File} file - 图片文件\n * @returns {Promise<{imageData: ImageData, width: number, height: number}>}\n */\nexport function getImageDataFromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    \n    reader.onload = (e) => {\n      const img = new Image()\n      \n      img.onload = () => {\n        const canvas = document.createElement('canvas')\n        canvas.width = img.width\n        canvas.height = img.height\n        \n        const ctx = canvas.getContext('2d')\n        ctx.drawImage(img, 0, 0)\n        \n        const imageData = ctx.getImageData(0, 0, img.width, img.height)\n        \n        resolve({\n          imageData,\n          width: img.width,\n          height: img.height,\n          imageSrc: e.target.result\n        })\n      }\n      \n      img.onerror = () => reject(new Error('图片加载失败'))\n      img.src = e.target.result\n    }\n    \n    reader.onerror = () => reject(new Error('文件读取失败'))\n    reader.readAsDataURL(file)\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\n/**\n * 二维码检测工具模块\n * 使用 @zxing/browser 和 @zxing/library 检测图像中的二维码位置\n */\nimport { BrowserQRCodeReader } from '@zxing/browser';\n\n// 创建 QR 码阅读器实例\nlet codeReader = null;\n\n/**\n * 获取或创建 QR 码阅读器\n */\nfunction getCodeReader() {\n  if (!codeReader) {\n    codeReader = new BrowserQRCodeReader();\n  }\n  return codeReader;\n}\n\n/**\n * 检测图像中的二维码位置\n * @param {ImageData} imageData - Canvas 的 ImageData 对象\n * @param {HTMLCanvasElement} sourceCanvas - 可选，源 canvas 元素\n * @returns {Promise<Object|null>} 检测结果，包含位置信息\n */\nexport async function detectQRCode(imageData, sourceCanvas = null) {\n  try {\n    const reader = getCodeReader();\n\n    // 创建一个临时 canvas 来生成图片\n    let canvas = sourceCanvas;\n    if (!canvas) {\n      canvas = document.createElement('canvas');\n      canvas.width = imageData.width;\n      canvas.height = imageData.height;\n      const ctx = canvas.getContext('2d');\n      ctx.putImageData(imageData, 0, 0);\n    }\n\n    // 转换为 blob URL\n    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\n    const imageUrl = URL.createObjectURL(blob);\n    try {\n      // 使用 ZXing 解码（会返回位置信息）\n      const result = await reader.decodeFromImageUrl(imageUrl);\n      if (!result) {\n        return null;\n      }\n\n      // 获取结果点（定位图案的位置）\n      const resultPoints = result.getResultPoints();\n      if (!resultPoints || resultPoints.length < 3) {\n        // 如果没有足够的定位点，返回 null\n        return null;\n      }\n\n      // 二维码的三个定位图案\n      // 通常 resultPoints[0] = 左下, resultPoints[1] = 左上, resultPoints[2] = 右上\n      const bottomLeft = {\n        x: resultPoints[0].getX(),\n        y: resultPoints[0].getY()\n      };\n      const topLeft = {\n        x: resultPoints[1].getX(),\n        y: resultPoints[1].getY()\n      };\n      const topRight = {\n        x: resultPoints[2].getX(),\n        y: resultPoints[2].getY()\n      };\n\n      // 计算第四个角点（右下）\n      // 右下 = 左下 + (右上 - 左上)\n      const bottomRight = {\n        x: bottomLeft.x + (topRight.x - topLeft.x),\n        y: bottomLeft.y + (topRight.y - topLeft.y)\n      };\n      const corners = {\n        topLeft,\n        topRight,\n        bottomRight,\n        bottomLeft\n      };\n      return {\n        topLeft,\n        topRight,\n        bottomRight,\n        bottomLeft,\n        boundingBox: calculateBoundingBox(corners),\n        center: calculateCenter(corners),\n        allDetections: [{\n          topLeft,\n          topRight,\n          bottomRight,\n          bottomLeft,\n          boundingBox: calculateBoundingBox(corners),\n          center: calculateCenter(corners)\n        }]\n      };\n    } finally {\n      // 清理 URL\n      URL.revokeObjectURL(imageUrl);\n    }\n  } catch (error) {\n    console.error('ZXing 检测错误:', error);\n    return null;\n  }\n}\n\n/**\n * 计算边界框\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 边界框 { x, y, width, height }\n */\nfunction calculateBoundingBox(corners) {\n  const {\n    topLeft,\n    topRight,\n    bottomRight,\n    bottomLeft\n  } = corners;\n  const points = [topLeft, topRight, bottomRight, bottomLeft];\n  const xs = points.map(p => p.x);\n  const ys = points.map(p => p.y);\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = Math.min(...ys);\n  const maxY = Math.max(...ys);\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  };\n}\n\n/**\n * 计算二维码中心点\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 中心点坐标 { x, y }\n */\nfunction calculateCenter(corners) {\n  const {\n    topLeft,\n    bottomRight\n  } = corners;\n  return {\n    x: (topLeft.x + bottomRight.x) / 2,\n    y: (topLeft.y + bottomRight.y) / 2\n  };\n}\n\n/**\n * 在 Canvas 上绘制检测结果\n * @param {CanvasRenderingContext2D} ctx - Canvas 2D 上下文\n * @param {Object} detection - 检测结果\n * @param {Object} options - 绘制选项\n */\nexport function drawDetectionResult(ctx, detection, options = {}) {\n  const {\n    fillColor = 'rgba(0, 245, 160, 0.15)',\n    lineWidth = 3,\n    cornerRadius = 8,\n    showCenter = true,\n    showCorners = true\n  } = options;\n\n  // 绘制所有检测到的二维码\n  const detections = detection.allDetections || [detection];\n  detections.forEach((det, index) => {\n    const {\n      topLeft,\n      topRight,\n      bottomRight,\n      bottomLeft,\n      center\n    } = det;\n\n    // 不同二维码用不同颜色\n    const colors = ['#00f5a0', '#ff6b6b', '#4ecdc4', '#ffe66d', '#a855f7'];\n    const color = colors[index % colors.length];\n    ctx.save();\n\n    // 绘制填充区域\n    ctx.fillStyle = fillColor;\n    ctx.beginPath();\n    ctx.moveTo(topLeft.x, topLeft.y);\n    ctx.lineTo(topRight.x, topRight.y);\n    ctx.lineTo(bottomRight.x, bottomRight.y);\n    ctx.lineTo(bottomLeft.x, bottomLeft.y);\n    ctx.closePath();\n    ctx.fill();\n\n    // 绘制边框\n    ctx.strokeStyle = color;\n    ctx.lineWidth = lineWidth;\n    ctx.lineCap = 'round';\n    ctx.lineJoin = 'round';\n\n    // 绘制四边形边框\n    ctx.beginPath();\n    ctx.moveTo(topLeft.x, topLeft.y);\n    ctx.lineTo(topRight.x, topRight.y);\n    ctx.lineTo(bottomRight.x, bottomRight.y);\n    ctx.lineTo(bottomLeft.x, bottomLeft.y);\n    ctx.closePath();\n    ctx.stroke();\n\n    // 绘制角点标记\n    if (showCorners) {\n      const corners = [topLeft, topRight, bottomRight, bottomLeft];\n      ctx.fillStyle = color;\n      corners.forEach(corner => {\n        ctx.beginPath();\n        ctx.arc(corner.x, corner.y, cornerRadius, 0, Math.PI * 2);\n        ctx.fill();\n      });\n    }\n\n    // 绘制中心点\n    if (showCenter) {\n      ctx.fillStyle = color;\n      ctx.beginPath();\n      ctx.arc(center.x, center.y, 6, 0, Math.PI * 2);\n      ctx.fill();\n\n      // 绘制十字线\n      ctx.strokeStyle = color;\n      ctx.lineWidth = 2;\n      const crossSize = 15;\n      ctx.beginPath();\n      ctx.moveTo(center.x - crossSize, center.y);\n      ctx.lineTo(center.x + crossSize, center.y);\n      ctx.moveTo(center.x, center.y - crossSize);\n      ctx.lineTo(center.x, center.y + crossSize);\n      ctx.stroke();\n    }\n    ctx.restore();\n  });\n}\n\n/**\n * 从视频帧获取 ImageData\n * @param {HTMLVideoElement} video - 视频元素\n * @param {HTMLCanvasElement} canvas - Canvas 元素\n * @returns {ImageData|null} ImageData 对象\n */\nexport function getImageDataFromVideo(video, canvas) {\n  if (!video || video.readyState !== video.HAVE_ENOUGH_DATA) {\n    return null;\n  }\n  const ctx = canvas.getContext('2d');\n  canvas.width = video.videoWidth;\n  canvas.height = video.videoHeight;\n  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n  return ctx.getImageData(0, 0, canvas.width, canvas.height);\n}\n\n/**\n * 从图片文件获取 ImageData\n * @param {File} file - 图片文件\n * @returns {Promise<{imageData: ImageData, width: number, height: number}>}\n */\nexport function getImageDataFromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = e => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(img, 0, 0);\n        const imageData = ctx.getImageData(0, 0, img.width, img.height);\n        resolve({\n          imageData,\n          width: img.width,\n          height: img.height,\n          imageSrc: e.target.result\n        });\n      };\n      img.onerror = () => reject(new Error('图片加载失败'));\n      img.src = e.target.result;\n    };\n    reader.onerror = () => reject(new Error('文件读取失败'));\n    reader.readAsDataURL(file);\n  });\n}","map":{"version":3,"names":["BrowserQRCodeReader","codeReader","getCodeReader","detectQRCode","imageData","sourceCanvas","reader","canvas","document","createElement","width","height","ctx","getContext","putImageData","blob","Promise","resolve","toBlob","imageUrl","URL","createObjectURL","result","decodeFromImageUrl","resultPoints","getResultPoints","length","bottomLeft","x","getX","y","getY","topLeft","topRight","bottomRight","corners","boundingBox","calculateBoundingBox","center","calculateCenter","allDetections","revokeObjectURL","error","console","points","xs","map","p","ys","minX","Math","min","maxX","max","minY","maxY","drawDetectionResult","detection","options","fillColor","lineWidth","cornerRadius","showCenter","showCorners","detections","forEach","det","index","colors","color","save","fillStyle","beginPath","moveTo","lineTo","closePath","fill","strokeStyle","lineCap","lineJoin","stroke","corner","arc","PI","crossSize","restore","getImageDataFromVideo","video","readyState","HAVE_ENOUGH_DATA","videoWidth","videoHeight","drawImage","getImageData","getImageDataFromFile","file","reject","FileReader","onload","e","img","Image","imageSrc","target","onerror","Error","src","readAsDataURL"],"sources":["/Users/gigass/DEVELOP/GitHub/qrcode/src/utils/qrDetector.js"],"sourcesContent":["/**\n * 二维码检测工具模块\n * 使用 @zxing/browser 和 @zxing/library 检测图像中的二维码位置\n */\nimport { BrowserQRCodeReader } from '@zxing/browser'\n\n// 创建 QR 码阅读器实例\nlet codeReader = null\n\n/**\n * 获取或创建 QR 码阅读器\n */\nfunction getCodeReader() {\n  if (!codeReader) {\n    codeReader = new BrowserQRCodeReader()\n  }\n  return codeReader\n}\n\n/**\n * 检测图像中的二维码位置\n * @param {ImageData} imageData - Canvas 的 ImageData 对象\n * @param {HTMLCanvasElement} sourceCanvas - 可选，源 canvas 元素\n * @returns {Promise<Object|null>} 检测结果，包含位置信息\n */\nexport async function detectQRCode(imageData, sourceCanvas = null) {\n  try {\n    const reader = getCodeReader()\n    \n    // 创建一个临时 canvas 来生成图片\n    let canvas = sourceCanvas\n    if (!canvas) {\n      canvas = document.createElement('canvas')\n      canvas.width = imageData.width\n      canvas.height = imageData.height\n      const ctx = canvas.getContext('2d')\n      ctx.putImageData(imageData, 0, 0)\n    }\n    \n    // 转换为 blob URL\n    const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'))\n    const imageUrl = URL.createObjectURL(blob)\n    \n    try {\n      // 使用 ZXing 解码（会返回位置信息）\n      const result = await reader.decodeFromImageUrl(imageUrl)\n      \n      if (!result) {\n        return null\n      }\n      \n      // 获取结果点（定位图案的位置）\n      const resultPoints = result.getResultPoints()\n      \n      if (!resultPoints || resultPoints.length < 3) {\n        // 如果没有足够的定位点，返回 null\n        return null\n      }\n      \n      // 二维码的三个定位图案\n      // 通常 resultPoints[0] = 左下, resultPoints[1] = 左上, resultPoints[2] = 右上\n      const bottomLeft = { x: resultPoints[0].getX(), y: resultPoints[0].getY() }\n      const topLeft = { x: resultPoints[1].getX(), y: resultPoints[1].getY() }\n      const topRight = { x: resultPoints[2].getX(), y: resultPoints[2].getY() }\n      \n      // 计算第四个角点（右下）\n      // 右下 = 左下 + (右上 - 左上)\n      const bottomRight = {\n        x: bottomLeft.x + (topRight.x - topLeft.x),\n        y: bottomLeft.y + (topRight.y - topLeft.y)\n      }\n      \n      const corners = { topLeft, topRight, bottomRight, bottomLeft }\n      \n      return {\n        topLeft,\n        topRight,\n        bottomRight,\n        bottomLeft,\n        boundingBox: calculateBoundingBox(corners),\n        center: calculateCenter(corners),\n        allDetections: [{ \n          topLeft, \n          topRight, \n          bottomRight, \n          bottomLeft, \n          boundingBox: calculateBoundingBox(corners),\n          center: calculateCenter(corners)\n        }]\n      }\n    } finally {\n      // 清理 URL\n      URL.revokeObjectURL(imageUrl)\n    }\n  } catch (error) {\n    console.error('ZXing 检测错误:', error)\n    return null\n  }\n}\n\n/**\n * 计算边界框\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 边界框 { x, y, width, height }\n */\nfunction calculateBoundingBox(corners) {\n  const { topLeft, topRight, bottomRight, bottomLeft } = corners\n  const points = [topLeft, topRight, bottomRight, bottomLeft]\n  \n  const xs = points.map(p => p.x)\n  const ys = points.map(p => p.y)\n  \n  const minX = Math.min(...xs)\n  const maxX = Math.max(...xs)\n  const minY = Math.min(...ys)\n  const maxY = Math.max(...ys)\n  \n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY\n  }\n}\n\n/**\n * 计算二维码中心点\n * @param {Object} corners - 四个角点坐标\n * @returns {Object} 中心点坐标 { x, y }\n */\nfunction calculateCenter(corners) {\n  const { topLeft, bottomRight } = corners\n  \n  return {\n    x: (topLeft.x + bottomRight.x) / 2,\n    y: (topLeft.y + bottomRight.y) / 2\n  }\n}\n\n/**\n * 在 Canvas 上绘制检测结果\n * @param {CanvasRenderingContext2D} ctx - Canvas 2D 上下文\n * @param {Object} detection - 检测结果\n * @param {Object} options - 绘制选项\n */\nexport function drawDetectionResult(ctx, detection, options = {}) {\n  const {\n    fillColor = 'rgba(0, 245, 160, 0.15)',\n    lineWidth = 3,\n    cornerRadius = 8,\n    showCenter = true,\n    showCorners = true\n  } = options\n  \n  // 绘制所有检测到的二维码\n  const detections = detection.allDetections || [detection]\n  \n  detections.forEach((det, index) => {\n    const { topLeft, topRight, bottomRight, bottomLeft, center } = det\n    \n    // 不同二维码用不同颜色\n    const colors = ['#00f5a0', '#ff6b6b', '#4ecdc4', '#ffe66d', '#a855f7']\n    const color = colors[index % colors.length]\n    \n    ctx.save()\n    \n    // 绘制填充区域\n    ctx.fillStyle = fillColor\n    ctx.beginPath()\n    ctx.moveTo(topLeft.x, topLeft.y)\n    ctx.lineTo(topRight.x, topRight.y)\n    ctx.lineTo(bottomRight.x, bottomRight.y)\n    ctx.lineTo(bottomLeft.x, bottomLeft.y)\n    ctx.closePath()\n    ctx.fill()\n    \n    // 绘制边框\n    ctx.strokeStyle = color\n    ctx.lineWidth = lineWidth\n    ctx.lineCap = 'round'\n    ctx.lineJoin = 'round'\n    \n    // 绘制四边形边框\n    ctx.beginPath()\n    ctx.moveTo(topLeft.x, topLeft.y)\n    ctx.lineTo(topRight.x, topRight.y)\n    ctx.lineTo(bottomRight.x, bottomRight.y)\n    ctx.lineTo(bottomLeft.x, bottomLeft.y)\n    ctx.closePath()\n    ctx.stroke()\n    \n    // 绘制角点标记\n    if (showCorners) {\n      const corners = [topLeft, topRight, bottomRight, bottomLeft]\n      ctx.fillStyle = color\n      \n      corners.forEach(corner => {\n        ctx.beginPath()\n        ctx.arc(corner.x, corner.y, cornerRadius, 0, Math.PI * 2)\n        ctx.fill()\n      })\n    }\n    \n    // 绘制中心点\n    if (showCenter) {\n      ctx.fillStyle = color\n      ctx.beginPath()\n      ctx.arc(center.x, center.y, 6, 0, Math.PI * 2)\n      ctx.fill()\n      \n      // 绘制十字线\n      ctx.strokeStyle = color\n      ctx.lineWidth = 2\n      const crossSize = 15\n      \n      ctx.beginPath()\n      ctx.moveTo(center.x - crossSize, center.y)\n      ctx.lineTo(center.x + crossSize, center.y)\n      ctx.moveTo(center.x, center.y - crossSize)\n      ctx.lineTo(center.x, center.y + crossSize)\n      ctx.stroke()\n    }\n    \n    ctx.restore()\n  })\n}\n\n/**\n * 从视频帧获取 ImageData\n * @param {HTMLVideoElement} video - 视频元素\n * @param {HTMLCanvasElement} canvas - Canvas 元素\n * @returns {ImageData|null} ImageData 对象\n */\nexport function getImageDataFromVideo(video, canvas) {\n  if (!video || video.readyState !== video.HAVE_ENOUGH_DATA) {\n    return null\n  }\n  \n  const ctx = canvas.getContext('2d')\n  canvas.width = video.videoWidth\n  canvas.height = video.videoHeight\n  \n  ctx.drawImage(video, 0, 0, canvas.width, canvas.height)\n  \n  return ctx.getImageData(0, 0, canvas.width, canvas.height)\n}\n\n/**\n * 从图片文件获取 ImageData\n * @param {File} file - 图片文件\n * @returns {Promise<{imageData: ImageData, width: number, height: number}>}\n */\nexport function getImageDataFromFile(file) {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader()\n    \n    reader.onload = (e) => {\n      const img = new Image()\n      \n      img.onload = () => {\n        const canvas = document.createElement('canvas')\n        canvas.width = img.width\n        canvas.height = img.height\n        \n        const ctx = canvas.getContext('2d')\n        ctx.drawImage(img, 0, 0)\n        \n        const imageData = ctx.getImageData(0, 0, img.width, img.height)\n        \n        resolve({\n          imageData,\n          width: img.width,\n          height: img.height,\n          imageSrc: e.target.result\n        })\n      }\n      \n      img.onerror = () => reject(new Error('图片加载失败'))\n      img.src = e.target.result\n    }\n    \n    reader.onerror = () => reject(new Error('文件读取失败'))\n    reader.readAsDataURL(file)\n  })\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}